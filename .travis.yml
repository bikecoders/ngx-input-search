sudo: required
language: node_js
node_js:
- node
cache: yarn
before_script:
- npm --silent run input-search:test:sonar -- -Dsonar.organization=bikecoders -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=$SONARCLOUD_TOKEN
script:
- npm run input-search:build-prod
before_deploy:
- npm run input-search:publish:copy-files
- cd dist/input-search
deploy:
  provider: npm
  email: bikecoders@gmail.com
  skip_cleanup: true
  api_key:
    secure: PCTwAwUmvfADKKuBzPu+5I/cJi6SOyFnLP/fdEC1UVFchC6s4YnavwFDPjLTPMLHOVcIGnqvQtGeFvgGv5jQPDh0nsdM1tDvwCNyW7ddAVtDBEBfc4E3rDpQ0WLQrxPyOkMlBjQi/7JmAY0rGbe0or9wxLp4rqgw91vkhxzbg4sz/W3483LQ9BRzqG7TyymBkiXfDjLTmhT0Uy18cx6cb3Pxp4yZ/mztOjI5Pmm6Z7rcTjAD0Txju8kiBt+gwEXJCLGhiHvcVql/lHTTZlv2wvLiCbzkapdR2cXd3pQ1jrVuB+xUr29CeRpG1Sb4JeGhvW9YD2MM7y6WHeBvQZh51tgPN/WgT3OpjgJBXV7fqYgWBlAJmda+b+S/r1Kh2dcSYi/HkyXGPld0imNM62tYYDSta9Et0JV2gXk1OgKRFFdHsKE3GFOHrFipLElSPOSe023ATTnQbQgUh3hmIWdqjmQnBDNzZK9W9zvpM8xsmowiTEAxaBZkVYbhpzAhR0Y7CZ5XYQwfn8ly45295agudxpEut4qP/L76P3zYaatd06pgiT9oLNzcWL2nvtKgqMGiUXUBTY+E6R5HzEKpX+0IdtdKNhRIDnq5BEP/nlSATgPEMv5qMqIGddtr34XkSmVMKM+N1h/gCCtYuDzjMIGUat7UOythzH5KtLZUClVp64=
  on:
    tags: true
    repo: bikecoders/ngx-input-search
after_deploy:
- cd ../..
- yarn add ngx-input-search@latest --force && npm run deploy-gh-pages
