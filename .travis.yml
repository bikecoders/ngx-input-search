sudo: required
language: node_js
node_js:
- node
before_script:
- npm --silent run input-search:test:sonar -- -Dsonar.organization=bikecoders -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=$SONARCLOUD_TOKEN
script:
- npm run input-search:build-prod
before_deploy:
- npm run input-search:publish:copy-files
- cd dist/input-search
deploy:
  provider: npm
  email: bikecoders@gmail.com
  skip_cleanup: true
  api_key:
    secure: FktS9h785MCGCPc9hbcL/CoFp2aiF5DCTCw3MTFU7syCv0MOJ7OqSbMaVYBrUXW1BRWFxqYoRvMaVwkVCxvPD+g71dbAHixjSOZ36hXOjfAAwoRx6TtQVAN+ikmMadTencDea7ImYuy0ISOHSV4K1jVAgyeeyQBBnwQiMgmx8QaD8OCCAKE9jxcqmv4LGS8+/iE4WAUNBFYthOhUvyoJqT4SCsDyuWjqM2Sqg8fOveNFnCInqATN7nbKSQnSkCVJg/BKflTAZLs5EspXZmFJJZ1IyoMomfBPVyo1pz5yeLNLRrvbz6UtrD7Gu0kT6+zfiUPNcw/GBped0l/WArW1Nj2nIde1kxnrHKRjcHoq6W8RJvVriCVd0M+hRU0sxOd0m793wdOLwMV0caZfkVL92+yxIwFnJ0gBhgjc9xrb7ABqv7VQYbw55HQuUoNPuryz9ThVL3OeinSKxx7F1t4sM7h5sLwGa7C6ctysYNgtb37YGgCF3HWC/cdGTnFA8xu84ZqRI0PWG3DTa7NUVUhrF9gSHNCT2P4NrQNQdr7VwbIwLL/rc9AzhptaDG3a6k0veKL+5YrPVcUtU4JIcS0gtfJH57QknTyOb4OnvdYm0wrh7uMP/A1M6iLFyVCVulYup4HddQCVSmyTH0RU4/WaoGO68eFgFbFVApD02TH+FU0=
  on:
    tags: true
    repo: bikecoders/ngx-input-search
after_deploy:
- cd ../..
- yarn upgrade ngx-input-search --force && yarn list ngx-input-search && npm run deploy-gh-pages
