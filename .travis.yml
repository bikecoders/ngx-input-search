sudo: required
language: node_js
node_js:
- node
before_script:
- npm --silent run input-search:test:sonar -- -Dsonar.organization=bikecoders -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=$SONARCLOUD_TOKEN
script:
- npm run input-search:build-prod
before_deploy:
- npm run input-search:publish:copy-files
- cd dist/input-search
deploy:
  provider: npm
  email: bikecoders@gmail.com
  skip_cleanup: true
  api_key:
    secure: CweAIJCm2ks42rQnIxC/GzfqsdlROste7XSWSincfg85w+eHUxPuhoJgzECRcZyZbxoE2AGaAz5ynpiYcsKWqXM40ARHUPFvAaeMG5JlAsiTaSG0v+J1EO2Nu7uP01udnT36p7Eoo8bSKss61c7UdbxT72a79nCzAWgV3WkFFRM624iZDlzSzCB0UbY1YDBUXrg5F4rYdzH2i/nvUCAh7va9B6nML8zdB/hA5PgzZi6RNT3937lNy+4klEp2iq6Mdgsko4dH44YpfwxObBAT8ptUYtgE25WlzqjVXuJFkg2qkS22G6gGhWVhDYELNNUB1juP0P9+5gMvENIskANC61Mot8U+z6xR7ncrUeseTmsBrFaQpIuQzbdQ+JxhdmaJ+YhLpHpPJC8rv6SP4HF8wYRuBdLNLY5+XV+BOpwJWdztt/i6Rzuzx80wjxRsBdDfGUKDkYfUOVxCKhdjNTMt4dSFKNMVxdm9NZixlIyZxKbK2vtGciSfzzj13h58YH9HiopzQVXe0serNzDTo2S20jyD2//02JpG5MXtKeqVSWUkP46ET4fRP+ROGpmngbzospxlTNVCFsCs5exOJ+VtY+s3mwcGY5xz2OKj5ze8wXqpIVmTwk74xxL+lbBX3fIP2fAdH3Zb1Ed3Id57fBgl5DjwLMwoOVGeKdZffU7QoQg=
  on:
    tags: true
    repo: bikecoders/ngx-input-search
after_deploy:
- cd ../..
- yarn upgrade ngx-input-search --force && yarn list ngx-input-search && npm run deploy-gh-pages
