sudo: required
language: node_js
node_js:
- node
cache: yarn
before_script:
- npm --silent run input-search:test:sonar -- -Dsonar.organization=bikecoders -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=$SONARCLOUD_TOKEN
script:
- npm run input-search:build-prod
before_deploy:
- npm run input-search:publish:copy-files
- cd dist/input-search
deploy:
  provider: npm
  email: bikecoders@gmail.com
  skip_cleanup: true
  api_key:
    secure: KBBrIpZQqCDfOROiurzABbx2MCLZWJazW3Q6jqRwA/TyPXS/KTHZwM6weRA/Bs9DTOYibVtBHRMHgIt5VEGdVAsHEi4S6qxCGASeQmqDU2FJUWXLs6FuKP3dScX0UB/HUzn+O9OrLozZITAFkHvCEUF/zEC3x7l5ATsdaSMl0Q3JGOp6MxTPKNfBu3H0/02Eeg3/A6NBDfzWVGmJ6WXXMmw8Q3BDiPnxLgKTWLGYhzVHIcg5z1Yw3eok78XFSy14POzviIiOzy0uCHoXz12Q0vo2M8Bt3RTZICCjMxDjarNSm004rBtFEdeQPZUmPyChYbREsWtl23RGp2tdqQ22aLGT77ZnZ9IdXruogZ+0X3GzWJhQ+rwNhJ6PnktdFAJcJF2527cdyHMvfDgF/QkVAboR7xhtNKqmmCGGWYvSpE1P/5dBbY1XZffbEm5/J1sif3MOmRs958J2RS8B/jNTGbICsyHmWAMuqJ3YBJChfrljwovqxpcleIanzz1+fOXEkpcB6pfkW2y8GOB8xBc5bb0V7bQIx741BiUBeCDUldSiRUz9linjcx338cnWb7UFNVKqUqgIvnIAqrVAvCLk//rX+aPEfcXscm/9kzFAumoO12xwAgQiAx0g2pxU/WOlSwA8x/xm5ebdBcztoNFeXgQ6YI2yoZlWNXv4gJPgAnM=
  on:
    tags: true
    repo: bikecoders/ngx-input-search
after_deploy:
- cd ../..
- yarn add ngx-input-search@latest --force && npm run deploy-gh-pages
